CREATE TABLE [PurchaseHeader] (
  PurchaseID VARCHAR(10) PRIMARY KEY CHECK (SalesTransactionID REGEXP 'JCN-PH[0-9][0-9][0-9]') NOT NULL,
  StaffID VARCHAR(10) REFERENCES [MsStaff] ([StaffID]) NOT NULL,
  CustomerID VARCHAR(10) REFERENCES [MsCustomer] ([CustomerID]) NOT NULL,
  TransactionDate DATE NOT NULL
);

INSERT INTO [PurchaseHeader] VALUES
  ('JCN-PH001', 'JCN-S3101', 'JCN-C3101', '2023-06-01'),
  ('JCN-PH002', 'JCN-S3102', 'JCN-C3102', '2023-06-02'),
  ('JCN-PH003', 'JCN-S3103', 'JCN-C3103', '2023-06-03'),
  ('JCN-PH004', 'JCN-S3104', 'JCN-C3104', '2023-06-04'),
  ('JCN-PH005', 'JCN-S3105', 'JCN-C3105', '2023-06-05'),
  ('JCN-PH006', 'JCN-S3106', 'JCN-C3106', '2023-06-06'),
  ('JCN-PH007', 'JCN-S3107', 'JCN-C3107', '2023-06-07'),
  ('JCN-PH008', 'JCN-S3108', 'JCN-C3108', '2023-06-08'),
  ('JCN-PH009', 'JCN-S3109', 'JCN-C3109', '2023-06-09'),
  ('JCN-PH010', 'JCN-S3110', 'JCN-C3110', '2023-06-10'),
  ('JCN-PH011', 'JCN-S3101', 'JCN-C3101', '2023-06-11'),
  ('JCN-PH012', 'JCN-S3102', 'JCN-C3102', '2023-06-12'),
  ('JCN-PH013', 'JCN-S3103', 'JCN-C3103', '2023-06-13'),
  ('JCN-PH014', 'JCN-S3104', 'JCN-C3104', '2023-06-14'),
  ('JCN-PH015', 'JCN-S3105', 'JCN-C3105', '2023-06-15');

CREATE TABLE [PurchaseDetail] (
  PurchaseID VARCHAR(10) REFERENCES [PurchaseHeader] ([PurchaseID]) NOT NULL,
  ServerID VARCHAR(10) REFERENCES [MsServer] ([ServerID]) NOT NULL,
  LocationID VARCHAR(10) REFERENCES [MsLocation] ([LocationID]) NOT NULL,
  TransactionDate DATE NOT NULL,
  PRIMARY KEY (PurchaseID, ServerID)
);


INSERT INTO [PurchaseDetail] VALUES
  ('JCN-PH001', 'JCN-V3101', 'JCN-L3101', '2023-06-01'),
  ('JCN-PH002', 'JCN-V3102', 'JCN-L3102', '2023-06-02'),
  ('JCN-PH003', 'JCN-V3103', 'JCN-L3103', '2023-06-03'),
  ('JCN-PH004', 'JCN-V3104', 'JCN-L3104', '2023-06-04'),
  ('JCN-PH005', 'JCN-V3105', 'JCN-L3105', '2023-06-05'),
  ('JCN-PH006', 'JCN-V3106', 'JCN-L3106', '2023-06-06'),
  ('JCN-PH007', 'JCN-V3107', 'JCN-L3107', '2023-06-07'),
  ('JCN-PH008', 'JCN-V3108', 'JCN-L3108', '2023-06-08'),
  ('JCN-PH009', 'JCN-V3109', 'JCN-L3109', '2023-06-09'),
  ('JCN-PH010', 'JCN-V3110', 'JCN-L3110', '2023-06-10'),
  ('JCN-PH011', 'JCN-V3101', 'JCN-L3101', '2023-06-11'),
  ('JCN-PH012', 'JCN-V3102', 'JCN-L3102', '2023-06-12'),
  ('JCN-PH013', 'JCN-V3103', 'JCN-L3103', '2023-06-13'),
  ('JCN-PH014', 'JCN-V3104', 'JCN-L3104', '2023-06-14'),
  ('JCN-PH015', 'JCN-V3105', 'JCN-L3105', '2023-06-15');


CREATE TABLE SalesHeader (
  SalesID VARCHAR(10) PRIMARY KEY CHECK (SalesID REGEXP 'JCN-S[0-9][0-9][0-9]') NOT NULL,
  CustomerID VARCHAR(10) REFERENCES MsCustomer (CustomerID) NOT NULL,
  TransactionDate DATE NOT NULL
);

INSERT INTO SalesHeader VALUES
  ('JCN-S9001', 'JCN-C3101', '2023-06-01'),
  ('JCN-S9002', 'JCN-C3102', '2023-06-02'),
  ('JCN-S9003', 'JCN-C3103', '2023-06-03'),
  ('JCN-S9004', 'JCN-C3104', '2023-06-04'),
  ('JCN-S9005', 'JCN-C3105', '2023-06-05'),
  ('JCN-S9006', 'JCN-C3106', '2023-06-06'),
  ('JCN-S9007', 'JCN-C3101', '2023-06-07'),
  ('JCN-S9008', 'JCN-C3102', '2023-06-08'),
  ('JCN-S9009', 'JCN-C3103', '2023-06-09'),
  ('JCN-S9010', 'JCN-C3104', '2023-06-10'),
  ('JCN-S9011', 'JCN-C3105', '2023-06-11'),
  ('JCN-S9012', 'JCN-C3106', '2023-06-12'),
  ('JCN-S9013', 'JCN-C3101', '2023-06-13'),
  ('JCN-S9014', 'JCN-C3102', '2023-06-14'),
  ('JCN-S9015', 'JCN-C3103', '2023-06-15');

CREATE TABLE SalesDetail (
  SalesID VARCHAR(10) REFERENCES SalesHeader (SalesID) NOT NULL,
  SalesTransactionID VARCHAR(10) REFERENCES MsSaleTransaction (SalesTransactionID),
  StartDate DATE,
  RentalDuration INT,
  ServerPrice INT NOT NULL,
  PRIMARY KEY (SalesHeaderID, SalesTransactionID)
);


INSERT INTO SalesDetail VALUES
  ('JCN-S9001', 'JCN-S3108', '2023-06-01', 7, 8000000),
  ('JCN-S9001', 'JCN-S3102', '2023-06-01', 5, 9000000),
  ('JCN-S9002', 'JCN-S3104', '2023-06-03', 3, 7000000),
  ('JCN-S9002', 'JCN-S3106', '2023-06-03', 4, 8500000),
  ('JCN-S9003', 'JCN-S3103', '2023-06-05', 6, 7500000),
  ('JCN-S9003', 'JCN-S3109', '2023-06-05', 2, 9500000),
  ('JCN-S9004', 'JCN-S3108', '2023-06-07', 7, 8000000),
  ('JCN-S9004', 'JCN-S3102', '2023-06-07', 5, 9000000),
  ('JCN-S9005', 'JCN-S3104', '2023-06-09', 3, 7000000),
  ('JCN-S9005', 'JCN-S3106', '2023-06-09', 4, 8500000),
  ('JCN-S9006', 'JCN-S3103', '2023-06-11', 6, 7500000),
  ('JCN-S9006', 'JCN-S3109', '2023-06-11', 2, 9500000),
  ('JCN-S9007', 'JCN-S3108', '2023-06-13', 7, 8000000),
  ('JCN-S9007', 'JCN-S3102', '2023-06-13', 5, 9000000),
  ('JCN-S9008', 'JCN-S3104', '2023-06-15', 3, 7000000),
  ('JCN-S9008', 'JCN-S3106', '2023-06-15', 4, 8500000),
  ('JCN-S9009', 'JCN-S3103', '2023-06-17', 6, 7500000),
  ('JCN-S9009', 'JCN-S3109', '2023-06-17', 2, 9500000),
  ('JCN-S9010', 'JCN-S3108', '2023-06-19', 7, 8000000),
  ('JCN-S9010', 'JCN-S3102', '2023-06-19', 5, 9000000),
  ('JCN-S9011', 'JCN-S3104', '2023-06-21', 3, 7000000),
  ('JCN-S9011', 'JCN-S3106', '2023-06-21', 4, 8500000),
  ('JCN-S9012', 'JCN-S3103', '2023-06-23', 6, 7500000),
  ('JCN-S9012', 'JCN-S3109', '2023-06-23', 2, 9500000),
  ('JCN-S9013', 'JCN-S3108', '2023-06-25', 7, 8000000),
  ('JCN-S9013', 'JCN-S3102', '2023-06-25', 5, 9000000),
  ('JCN-S9014', 'JCN-S3104', '2023-06-27', 3, 7000000),
  ('JCN-S9014', 'JCN-S3106', '2023-06-27', 4, 8500000),
  ('JCN-S9015', 'JCN-S3103', '2023-06-29', 6, 7500000),
  ('JCN-S9015', 'JCN-S3109', '2023-06-29', 2, 9500000);

